apt-get install build-essential autoconf

### something should install gcc for builds, I guess, then newest uswgi install through pip
#apt install python3-channels-redis
###apt install uwsgi uwsgi-plugin-python3


uvicorn kindofparadox.asgi:application --reload --port 5000 --proxy-headers --log-level="trace" --forwarded-allow-ips="*"

docker build --network=host -t kind .
docker run --rm -p 80:80 -p 6379:6379 kind # http and redis
docker run --rm -p 443:443 -p 9443:9443 kind #for ssl
# --rm tells that container should be erased as soon as it terminates
# (which should not happen if you have "tail -f" in place)

# ENTRYPOINT should have something like "tail -f /dev/null" to prevent Docker from exiting 

docker container ls # will show only running, but in dashboard you will be able to see stopped (mostly)
docker image ls
docker image prune
docker run --name mykind
docker run -it "command line" shell-name # is the method to run command if container exits too soon
docker restart mykind # or whatever name you can see in docker dachboard,  like friendly_poitras
docker exec mykind tail -f /var/log/redis/redis-server.log

# to restart wsl open PowerShell outside of WSL
wsl --shutdown

# in case of node error
# /mnt/c/Program Files/nodejs/npx: 6: Syntax error: word unexpected (expecting "in")
# try to open new terminal shell and pass commands there, not in VS code

for Google login make sure you display the app on "localhost" or "my_server", not ips
environment for keys have to be prefixed REACT_APP_


https://www.guguweb.com/2019/11/13/django-nginx-deploy-your-django-project-on-a-production-server/
./manage.py collectstatic

https://medium.com/@makcorps.activation.api/why-instagram-use-uwsgi-c51848348dd6

nginx timeout settings if anything
https://stackoverflow.com/questions/48794936/run-simultaneously-uwsgi-and-asgi-with-django

uvicorn https
https://www.uvicorn.org/deployment/